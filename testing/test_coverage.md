| Function | Description | Class | File | Type | Target | Mode | Async | Parametrize | Fixtures |
|----------|-------------|--------|------|------|--------|------|--------|--------------|----------|
| `test_buy_and_track_cash_position` |  | `TestPaperIntegration` | [test_paper_backtest.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/integration/test_paper_backtest.py#L10) | ? | ? | n/a | no | 'instrument_type', ['spot', 'margin', 'futures'] | instrument_type, fee_mode, leverage |
| `test_bracket_order_submission_links_children` | Bracket orders properly link parent/children and OCO pairs. | `TestBracketOrderSubmission` | [test_broker_bracket_orders.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_bracket_orders.py#L24) | unit | broker | both | no | 'stop_exectype, limit_exectype', [(bt.Order.Stop, bt.Order.Limit), (bt.Order.StopLimit, bt.Order.Limit), (bt.Order.Stop, bt.Order.Market), (bt.Order.StopLimit, bt.Order.Market), (bt.Order.Stop, bt.Order.StopLimit), (bt.Order.StopLimit, bt.Order.StopLimit)] | make_broker, make_data, make_owner, stop_exectype, limit_exectype, mode |
| `test_child_order_exectypes_respected` | Child orders retain their exact execution type and are linked correctly. | `TestChildOrderTypes` | [test_broker_bracket_orders.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_bracket_orders.py#L96) | unit | broker | both | no | 'stop_exectype, limit_exectype', [(bt.Order.Stop, bt.Order.Limit), (bt.Order.StopLimit, bt.Order.Limit), (bt.Order.Stop, bt.Order.Market), (bt.Order.StopLimit, bt.Order.Market), (bt.Order.Stop, bt.Order.StopLimit), (bt.Order.StopLimit, bt.Order.StopLimit)] | make_broker, make_data, make_owner, stop_exectype, limit_exectype, mode |
| `test_child_fills_before_parent_marked_complete` | If a child order is filled before the parent is completed, the system handles it cleanly. | `TestExecutionOrder` | [test_broker_bracket_orders.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_bracket_orders.py#L163) | unit | broker | both | no | 'stop_exectype, limit_exectype', [(bt.Order.Stop, bt.Order.Limit), (bt.Order.StopLimit, bt.Order.Limit), (bt.Order.Stop, bt.Order.Market), (bt.Order.StopLimit, bt.Order.Market), (bt.Order.Stop, bt.Order.StopLimit), (bt.Order.StopLimit, bt.Order.StopLimit)] | make_broker, make_data, make_owner, stop_exectype, limit_exectype, mode |
| `test_notification_queueing` | notify() adds to queue; get_notification() retrieves and clears it. | `TestBrokerCallbacks` | [test_broker_callbacks.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_callbacks.py#L11) | unit | broker | both | no |  | make_broker, make_data, make_order, mode |
| `test_fill_callback_transitions_status` | Partial fill → complete fill using broker._on_order_update via simulate_order_fill. | `TestBrokerCallbacks` | [test_broker_callbacks.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_callbacks.py#L32) | unit | broker | both | no | 'instrument_type', ['spot'] | make_broker, make_data, make_owner, make_order, final_price, instrument_type, mode |
| `test_fees_deducted_from_cash` | Order fills deduct commission from cash. | `TestCashAndPortfolioValue` | [test_broker_cash_value.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_cash_value.py#L38) | unit | broker | both | no | 'instrument_type', ['spot', 'futures', 'margin', 'perp'] | make_broker, make_data, instrument_type, mode |
| `test_order_rejected_if_funds_insufficient` | Orders are rejected if available cash is too low. | `TestCashAndPortfolioValue` | [test_broker_cash_value.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_cash_value.py#L55) | unit | broker | both | no | 'instrument_type', ['spot', 'futures', 'margin', 'perp'] | make_broker, make_data, instrument_type, mode |
| `test_cash_and_value_uses_balance` | getcash() and getvalue() reflect balances and latest price via OHLCV. | `TestCashAndPortfolioValue` | [test_broker_cash_value.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_cash_value.py#L72) | unit | broker | both | no |  | make_mock_store, make_broker, mode |
| `test_comminfo_init_sets_expected_attributes` |  | `TestCCXTCommissionInfo` | [test_broker_commission_info.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_commission_info.py#L29) | unit | comm_info | n/a | no | 'label, CommClass, expected_stocklike', INSTRUMENT_CLASSES | make_mock_store, CommClass, expected_stocklike, label |
| `test_comminfo_init_with_fees` |  | `TestCCXTCommissionInfo` | [test_broker_commission_info.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_commission_info.py#L41) | unit | comm_info | n/a | no | 'label, CommClass, _', INSTRUMENT_CLASSES | make_mock_store, CommClass, _, label |
| `test_comminfo_init_handles_error` |  | `TestCCXTCommissionInfo` | [test_broker_commission_info.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_commission_info.py#L49) | unit | comm_info | n/a | no | 'label, CommClass, _', INSTRUMENT_CLASSES | make_mock_store, CommClass, _, label |
| `test_getoperationcost_maker` |  | `TestCCXTCommissionInfo` | [test_broker_commission_info.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_commission_info.py#L60) | unit | comm_info | n/a | no | 'label, CommClass, _', INSTRUMENT_CLASSES | make_mock_store, CommClass, _, label, size, price, expected |
| `test_getoperationcost_taker` |  | `TestCCXTCommissionInfo` | [test_broker_commission_info.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_commission_info.py#L73) | unit | comm_info | n/a | no | 'label, CommClass, _', INSTRUMENT_CLASSES | make_mock_store, CommClass, _, label, size, price, expected |
| `test_getcommission` |  | `TestCCXTCommissionInfo` | [test_broker_commission_info.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_commission_info.py#L86) | unit | comm_info | n/a | no | 'CommClass', [CCXTSpotCommInfo, CCXTMarginCommInfo, CCXTFuturesCommInfo] | make_mock_store, CommClass, is_maker, expected |
| `test_commtype_property_is_perc` |  | `TestCCXTCommissionInfo` | [test_broker_commission_info.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_commission_info.py#L94) | unit | comm_info | n/a | no | 'label, CommClass, _', INSTRUMENT_CLASSES | make_mock_store, CommClass, _, label |
| `test_stocklike_flag` |  | `TestCCXTCommissionInfo` | [test_broker_commission_info.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_commission_info.py#L99) | unit | comm_info | n/a | no | 'label, CommClass, expected', INSTRUMENT_CLASSES | make_mock_store, CommClass, expected, label |
| `test_ccxt_not_supported` |  | `TestBrokerFeeFallbacks` | [test_broker_commission_info.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_commission_info.py#L113) | unit | broker | n/a | no |  | make_mock_store, caplog |
| `test_generic_exception` |  | `TestBrokerFeeFallbacks` | [test_broker_commission_info.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_commission_info.py#L121) | unit | broker | n/a | no |  | make_mock_store, caplog |
| `test_getcommissioninfo` | Router returns commission object with correct calculations. | `TestCommissionRouting` | [test_broker_commission_selection.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_commission_selection.py#L13) | unit | broker | both | no | 'instrument_type', ['spot', 'margin', 'futures'] | make_broker, make_data, instrument_type, mode |
| `test_commrouter_mixin_is_used` | Ensure all broker variants include CommInfoRouterMixin. | `TestCommissionRouting` | [test_broker_commission_selection.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_commission_selection.py#L34) | unit | broker | both | no |  | make_broker, mode |
| `test_threaded_fill_is_consistent` | Order fill simulated on separate thread updates state without race. | `TestThreadSafety` | [test_broker_concurrency.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_concurrency.py#L19) | unit | broker | both | no |  | make_broker, make_data, make_order, mode |
| `test_concurrent_fill_updates_are_safe` | Simulates two updates to the same order in parallel, one partial and one complete. | `TestThreadSafety` | [test_broker_concurrency.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_concurrency.py#L37) | unit | broker | both | no |  | make_broker, make_data, make_order, mode |
| `test_concurrent_cancel_and_fill_safely` | Race condition between cancel and fill should not cause crash. | `TestThreadSafety` | [test_broker_concurrency.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_concurrency.py#L60) | unit | broker | n/a | no |  | setup_live_broker, mock_data |
| `test_order_cancellation` | Canceling an order triggers store.cancel_order_async and updates status. | `TestCancelBehaviorAndWarnings` | [test_broker_edge_cases.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_edge_cases.py#L19) | unit | broker | both | no |  | mock_run, make_broker, make_data, make_owner, mode |
| `test_logs_warning_on_unknown_instrument` | Unknown instrument types log a warning and fallback to empty position. | `TestCancelBehaviorAndWarnings` | [test_broker_edge_cases.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_edge_cases.py#L47) | unit | broker | both | no |  | make_broker, make_data, make_owner, caplog, mode |
| `test_partial_fill_transitions` | Partial fills are tracked and averaged into final price on full fill. | `TestLiveOrderLifecycle` | [test_broker_edge_cases.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_edge_cases.py#L78) | unit | broker | both | no | 'final_price', [10050.0, 10025.0] | make_broker, make_data, make_owner, final_price, mode |
| `test_returns_backbroker_for_paper_mode` | CTBroker.create returns CCXTBackBroker for paper mode. | `TestCTBrokerFactory` | [test_broker_factory.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_factory.py#L9) | unit | factory | both | no | 'mode', ['paper'] | mode |
| `test_returns_live_broker_for_live_or_sandbox` | CTBroker.create returns CCXTLiveBroker for live/sandbox modes. | `TestCTBrokerFactory` | [test_broker_factory.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_factory.py#L22) | unit | factory | both | no | 'mode', ['live', 'sandbox'] | mock_store, mode |
| `test_defaults_to_live_mode` | CTBroker.create defaults to live mode if no mode is passed. | `TestCTBrokerFactory` | [test_broker_factory.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_factory.py#L34) | unit | factory | n/a | no |  | mock_store |
| `test_raises_if_store_missing_in_live_mode` | CTBroker.create raises if live broker requested without store. | `TestCTBrokerFactory` | [test_broker_factory.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_factory.py#L46) | unit | factory | live | no |  |  |
| `test_filled_order_cancels_oco_sibling` | When one leg of an OCO pair is filled, the sibling is canceled. | `TestOCOExecution` | [test_broker_oco_chains.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_oco_chains.py#L29) | unit | broker | both | no | 'trigger_side, stop_exectype, limit_exectype', [('stop', bt.Order.Stop, bt.Order.Limit), ('stop', bt.Order.StopLimit, bt.Order.Limit), ('stop', bt.Order.Stop, bt.Order.Market), ('stop', bt.Order.StopLimit, bt.Order.Market), ('stop', bt.Order.Stop, bt.Order.StopLimit), ('stop', bt.Order.StopLimit, bt.Order.StopLimit), ('limit', bt.Order.Stop, bt.Order.Limit), ('limit', bt.Order.StopLimit, bt.Order.Limit), ('limit', bt.Order.Stop, bt.Order.Market), ('limit', bt.Order.StopLimit, bt.Order.Market), ('limit', bt.Order.Stop, bt.Order.StopLimit), ('limit', bt.Order.StopLimit, bt.Order.StopLimit)] | make_broker, make_data, make_owner, trigger_side, stop_exectype, limit_exectype, mode |
| `test_partial_fill_does_not_cancel_oco` | Partial fill of an OCO leg should not cancel its sibling. | `TestOCOExecution` | [test_broker_oco_chains.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_oco_chains.py#L88) | unit | broker | both | no | 'stop_exectype', [bt.Order.Stop, bt.Order.StopLimit] | make_broker, make_data, make_owner, stop_exectype, mode |
| `test_multiple_oco_groups_on_same_data` | Multiple independent OCO brackets can coexist on the same symbol. | `TestMultipleOCOGroups` | [test_broker_oco_chains.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_oco_chains.py#L156) | unit | broker | both | no | 'stop_exectype, limit_exectype', [(bt.Order.Stop, bt.Order.Limit), (bt.Order.StopLimit, bt.Order.Limit), (bt.Order.Stop, bt.Order.Market), (bt.Order.StopLimit, bt.Order.Market), (bt.Order.Stop, bt.Order.StopLimit), (bt.Order.StopLimit, bt.Order.StopLimit)] | make_broker, make_data, make_owner, stop_exectype, limit_exectype, mode |
| `test_manual_cancel_parent_does_not_cancel_children` | Manually canceling a parent order does not cancel its children. | `TestParentChildCancellation` | [test_broker_oco_chains.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_oco_chains.py#L241) | unit | broker | both | no | 'stop_exectype, limit_exectype', [(bt.Order.Stop, bt.Order.Limit), (bt.Order.StopLimit, bt.Order.Limit), (bt.Order.Stop, bt.Order.Market), (bt.Order.StopLimit, bt.Order.Market), (bt.Order.Stop, bt.Order.StopLimit), (bt.Order.StopLimit, bt.Order.StopLimit)] | make_broker, make_data, make_owner, stop_exectype, limit_exectype, mode |
| `test_parent_rejected_children_not_submitted` | If the parent order is rejected, children are not submitted. | `TestParentChildCancellation` | [test_broker_oco_chains.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_oco_chains.py#L303) | unit | broker | both | no | 'stop_exectype, limit_exectype', [(bt.Order.Stop, bt.Order.Limit), (bt.Order.StopLimit, bt.Order.Limit)] | make_broker, make_data, make_owner, stop_exectype, limit_exectype, mode |
| `test_order_submission` | Submitting an order attaches it to the broker and assigns a ref. | `TestOrderLifecycleAndFills` | [test_broker_order_lifecycle.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_lifecycle.py#L11) | unit | broker | both | no |  | make_broker, make_data, make_owner, mode |
| `test_strategy_order_creation` | broker.buy(...) returns a non-rejected order and registers it. | `TestOrderLifecycleAndFills` | [test_broker_order_lifecycle.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_lifecycle.py#L37) | unit | broker | both | no |  | make_broker, make_data, make_owner, test_comminfo, mode |
| `test_order_status_changes_on_fill` | Simulated fill transitions order status to Completed. | `TestOrderLifecycleAndFills` | [test_broker_order_lifecycle.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_lifecycle.py#L52) | unit | broker | both | no |  | make_broker, make_data, make_order, mode |
| `test_strategy_order_cancellation` | Simulated cancel updates order status to Canceled. | `TestOrderLifecycleAndFills` | [test_broker_order_lifecycle.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_lifecycle.py#L67) | unit | broker | both | no |  | make_broker, make_data, make_owner, test_comminfo, mode |
| `test_submit_returns_existing_order_if_ref_exists` | broker.submit returns the same object if the ref is already registered. | `TestOrderLifecycleAndFills` | [test_broker_order_lifecycle.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_lifecycle.py#L88) | unit | broker | both | no |  | make_broker, make_order, mode |
| `test_cancel_does_not_cancel_completed_order` | broker.cancel returns False for completed orders and leaves them untouched. | `TestOrderLifecycleAndFills` | [test_broker_order_lifecycle.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_lifecycle.py#L103) | unit | broker | both | no |  | make_broker, mode |
| `test_submit_rejects_unsupported_exectype` | Invalid exectype raises ValueError on submit. | `TestOrderLifecycleAndFills` | [test_broker_order_lifecycle.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_lifecycle.py#L120) | unit | broker | both | no |  | make_broker, make_data, make_owner, mode |
| `test_partial_fills` | Simulated partial → complete fill transitions correctly with accurate average price. | `TestOrderLifecycleAndFills` | [test_broker_order_lifecycle.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_lifecycle.py#L141) | unit | broker | both | no | 'final_price', [10050.0, 10025.0] | make_broker, make_data, make_order, final_price, mode |
| `test_buy_sell_orders` | Validates buy/sell order submission and position updates. | `TestOrderSubmission` | [test_broker_order_submission.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_submission.py#L10) | unit | broker | back | no |  | make_broker, make_data, make_owner, test_comminfo |
| `test_buy_rejected_on_insufficient_cash` | Verifies that buy orders are rejected if cash is insufficient. | `TestOrderSubmission` | [test_broker_order_submission.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_submission.py#L34) | unit | broker | both | no | 'mode', ['live', 'back'] | make_broker, make_data, make_owner, mode |
| `test_sell_rejected_on_insufficient_position` | Verifies that sells are rejected if position is insufficient, except for futures/perp. | `TestOrderSubmission` | [test_broker_order_submission.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_submission.py#L55) | unit | broker | both | no | 'instrument_type,should_reject', [('spot', True), ('margin', True), ('futures', False), ('perp', False)] | make_broker, make_data, make_owner, instrument_type, should_reject, mode |
| `test_various_order_types_submission` | Confirms all order types (Market, Limit, Stop, StopLimit) are accepted. | `TestOrderSubmission` | [test_broker_order_submission.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_submission.py#L82) | unit | broker | both | no | 'mode', ['live', 'back'] | make_broker, make_data, make_owner, mode |
| `test_cancel_skips_dead_order` | Ensures cancel() does nothing for dead orders. | `TestOrderSubmission` | [test_broker_order_submission.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_order_submission.py#L120) | unit | broker | both | no | 'mode', ['live', 'back'] | make_broker, make_data, make_owner, mode |
| `test_spot_position_tracker_updates` | Spot and margin trackers update correctly. | `TestPositionTracking` | [test_broker_positions.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_positions.py#L34) | unit | broker | both | no | 'instrument_type,side,expected_size', [('spot', 'buy', 0.1), ('spot', 'sell', -0.1), ('margin', 'buy', 0.1), ('margin', 'sell', -0.1)], ids=['spot-buy', 'spot-sell', 'margin-buy', 'margin-sell'] | make_broker, make_data, make_owner, instrument_type, side, expected_size, mode |
| `test_futures_position_tracker_updates` | Futures and perp trackers update correctly. | `TestPositionTracking` | [test_broker_positions.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_positions.py#L70) | unit | broker | both | no | 'instrument_type,side,expected_size', [('futures', 'buy', 0.2), ('futures', 'sell', -0.2), ('perp', 'buy', 0.2), ('perp', 'sell', -0.2)], ids=['futures-buy', 'futures-sell', 'perp-buy', 'perp-sell'] | make_broker, make_data, make_owner, instrument_type, side, expected_size, mode |
| `test_position_flat_after_round_trip` | After a buy and equal sell, position size is zero. | `TestPositionTracking` | [test_broker_positions.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_positions.py#L92) | unit | broker | both | no | 'instrument_type', ['spot', 'margin', 'futures', 'perp'] | make_broker, make_data, make_owner, instrument_type, mode |
| `test_average_price_tracking` | Average price updates correctly over multiple same-direction fills. | `TestPositionTracking` | [test_broker_positions.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_positions.py#L112) | unit | broker | both | no | 'instrument_type', ['spot', 'margin', 'futures', 'perp'] | make_broker, make_data, make_owner, instrument_type, mode |
| `test_backbroker_starts_with_specified_cash` | Back broker sets startingcash from the constructor. | `TestBackBrokerInitialization` | [test_broker_startup.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_startup.py#L8) | unit | broker | both | no |  | mode |
| `test_livebroker_uses_store_balance_for_startingcash` | Live broker sets startingcash from latest store balance. | `TestLiveBrokerInitialization` | [test_broker_startup.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_startup.py#L22) | unit | broker | both | no |  | make_mock_store, mode |
| `test_live_broker_registers_callbacks` | Live broker registers watchers and callbacks on init. | `TestLiveBrokerInitialization` | [test_broker_startup.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_startup.py#L37) | unit | broker | both | no |  | make_mock_store, mode |
| `test_initialization_without_store_raises` | Creating a live broker without a store should raise a ValueError. | `TestLiveBrokerInitialization` | [test_broker_startup.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_startup.py#L53) | unit | broker | both | no |  | mode |
| `test_falls_back_to_zero_startingcash_if_balance_missing` | If get_latest_balance returns None, startingcash defaults to 0.0. | `TestLiveBrokerInitialization` | [test_broker_startup.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_startup.py#L63) | unit | broker | both | no |  | make_mock_store, mode |
| `test_stop_calls_store_stop_watchers` | Broker.stop() calls store's stop_watching_* methods. | `TestLiveBrokerInitialization` | [test_broker_startup.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/broker/test_broker_startup.py#L75) | unit | broker | both | no |  | make_mock_store, mode |
| `test_timeframe_mapping` |  | `TestTimeframeMapping` | [test_feed_core.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_core.py#L9) | ? | ? | n/a | no |  |  |
| `test_all_timeframes` |  | `TestTimeframeMapping` | [test_feed_core.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_core.py#L19) | ? | ? | n/a | no |  | mock_store, pre_allocate_feed |
| `test_historical_data` |  | `TestCandleLoadingLogic` | [test_feed_core.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_core.py#L30) | ? | ? | n/a | no |  | store, pre_allocate_feed |
| `test_data_gaps` |  | `TestCandleLoadingLogic` | [test_feed_core.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_core.py#L45) | ? | ? | n/a | no |  | mock_store, pre_allocate_feed |
| `test_set_candle_assigns_lines_correctly` |  | `TestCandleLoadingLogic` | [test_feed_core.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_core.py#L73) | ? | ? | n/a | no |  | mock_store, pre_allocate_feed |
| `test_thread_safety` |  | `TestCandleLoadingLogic` | [test_feed_core.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_core.py#L82) | ? | ? | n/a | no |  | mock_store, pre_allocate_feed |
| `test_historical_date_bounds` |  | `TestDateFilteringLogic` | [test_feed_core.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_core.py#L118) | ? | ? | n/a | no |  | store, pre_allocate_feed, mocker |
| `test_fromdate_after_todate_yields_no_data` |  | `TestDateFilteringLogic` | [test_feed_core.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_core.py#L144) | ? | ? | n/a | no |  | mock_store, pre_allocate_feed |
| `test_shutdown` |  | `TestFeedStartStop` | [test_feed_core.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_core.py#L165) | ? | ? | n/a | no |  | mock_store |
| `test_is_live_only_after_historical` |  | `TestFeedStartStop` | [test_feed_core.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_core.py#L171) | ? | ? | n/a | no |  | mock_store, pre_allocate_feed |
| `test_cerebro_integration` |  | `TestCerebroFeedIntegration` | [test_feed_integration.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_integration.py#L10) | ? | ? | n/a | no |  | store, dummy_strategy |
| `test_multiple_feeds` |  | `TestCerebroFeedIntegration` | [test_feed_integration.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_integration.py#L19) | ? | ? | n/a | no |  | store, dummy_strategy, mocker |
| `test_live_data` |  | `TestLiveFeedTransition` | [test_feed_live.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_live.py#L7) | ? | ? | n/a | no |  | mock_store, pre_allocate_feed |
| `test_historical_to_live_transition` |  | `TestLiveFeedTransition` | [test_feed_live.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_live.py#L46) | ? | ? | n/a | no |  | mock_store, pre_allocate_feed |
| `test_bad_candle_format_skipped_or_warns` | Ensures malformed candles are skipped and log a warning, rather than raising. | `TestMalformedCandleHandling` | [test_feed_resilience.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_resilience.py#L20) | ? | ? | n/a | no | 'bad_candle', [[1743055740000, 87331.24], [None, None, None, None, None, None], ['bad', 'data', 'in', 'string', 'form', 1.0], []] | mock_store, pre_allocate_feed, caplog, bad_candle |
| `test_error_handling` |  | `TestMalformedCandleHandling` | [test_feed_resilience.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_resilience.py#L43) | ? | ? | n/a | no |  |  |
| `test_queue_drops_when_full_and_logs_warning` |  | `TestQueueOverflowHandling` | [test_feed_resilience.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_resilience.py#L52) | ? | ? | n/a | no |  | mock_store |
| `test_live_feed_respects_todate_cutoff` |  | `TestQueueOverflowHandling` | [test_feed_resilience.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/feed/test_feed_resilience.py#L59) | ? | ? | n/a | no |  | mock_store, pre_allocate_feed |
| `test_order_initialization` |  | `TestOrderExecutionState` | [test_order_behavior.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_behavior.py#L38) | ? | ? | live | no | 'side', ['buy', 'sell'] | setup_broker, mock_data, mock_owner, side |
| `test_initialization_without_data` |  | `TestOrderExecutionState` | [test_order_behavior.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_behavior.py#L54) | ? | ? | live | no | 'setup_broker', ['live', 'back'], indirect=True | setup_broker, mock_owner |
| `test_unsupported_exectype` |  | `TestOrderExecutionState` | [test_order_behavior.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_behavior.py#L66) | ? | ? | live | no | 'setup_broker', ['live', 'back'], indirect=True | setup_broker, mock_data, mock_owner |
| `test_order_submission` |  | `TestOrderExecutionState` | [test_order_behavior.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_behavior.py#L79) | ? | ? | live | no | 'setup_broker', ['live', 'back'], indirect=True | setup_broker, mock_data, mock_owner |
| `test_order_update` |  | `TestOrderExecutionState` | [test_order_behavior.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_behavior.py#L96) | ? | ? | live | no | 'setup_broker', ['live', 'back'], indirect=True | setup_broker, mock_data, mock_owner, side |
| `test_partial_fill` |  | `TestOrderExecutionState` | [test_order_behavior.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_behavior.py#L117) | ? | ? | live | no | 'setup_broker', ['live', 'back'], indirect=True | setup_broker, mock_data, mock_owner |
| `test_complete_after_partial_fill` |  | `TestOrderExecutionState` | [test_order_behavior.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_behavior.py#L136) | ? | ? | live | no | 'setup_broker', ['live', 'back'], indirect=True | setup_broker, mock_data, mock_owner |
| `test_datetime_handling_in_update` |  | `TestOrderExecutionState` | [test_order_behavior.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_behavior.py#L155) | ? | ? | live | no | 'setup_broker', ['live', 'back'], indirect=True | setup_broker, mock_data, mock_owner |
| `test_initialization` | Test full initialization from a typical CCXT order with timestamp. | `TestOrderParsingBehavior` | [test_order_state_parsing.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_state_parsing.py#L15) | ? | ? | n/a | no |  |  |
| `test_initialization_with_minimal_info` | Test initialization when only 'id' and 'status' are provided. | `TestOrderParsingBehavior` | [test_order_state_parsing.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_state_parsing.py#L32) | ? | ? | n/a | no |  |  |
| `test_status_mapping` | Test mapping of CCXT status strings to Backtrader status constants. | `TestOrderParsingBehavior` | [test_order_state_parsing.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_state_parsing.py#L54) | ? | ? | n/a | no | 'exchange_status, expected_bt_status', [('open', bt.Order.Submitted), ('closed', bt.Order.Completed), ('canceled', bt.Order.Canceled), ('cancelled', bt.Order.Canceled), ('rejected', bt.Order.Rejected), ('expired', bt.Order.Expired), ('unknown', bt.Order.Submitted)] | exchange_status, expected_bt_status |
| `test_datetime_from_iso_string` | Test parsing of ISO 8601 datetime strings. | `TestOrderParsingBehavior` | [test_order_state_parsing.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_state_parsing.py#L60) | ? | ? | n/a | no |  |  |
| `test_datetime_from_milliseconds` | Test conversion of timestamp in milliseconds to datetime. | `TestOrderParsingBehavior` | [test_order_state_parsing.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_state_parsing.py#L66) | ? | ? | n/a | no |  |  |
| `test_zero_or_negative_values` | Test proper parsing of 0 values and string-castable values. | `TestOrderParsingBehavior` | [test_order_state_parsing.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_state_parsing.py#L76) | ? | ? | n/a | no |  |  |
| `test_missing_fields` | Test default behavior when fields are missing. | `TestOrderParsingBehavior` | [test_order_state_parsing.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_state_parsing.py#L88) | ? | ? | n/a | no |  |  |
| `test_average_price_fallback` | Use 'average' price if 'price' is missing. | `TestOrderParsingBehavior` | [test_order_state_parsing.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_state_parsing.py#L97) | ? | ? | n/a | no |  |  |
| `test_price_priority_over_average` | Use 'price' if both 'price' and 'average' are present. | `TestOrderParsingBehavior` | [test_order_state_parsing.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/order/test_order_state_parsing.py#L103) | ? | ? | n/a | no |  |  |
| `test_invalid_data_name_format` | Ensure parse_data_name returns empty strings when format is invalid or missing. | `TestParseDataName` | [test_misc_utils.py](https://github.com/LachlanBridges/cracktrader/blob/master/tests/unit/utils/test_misc_utils.py#L15) | ? | ? | n/a | no |  |  |